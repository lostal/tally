---
import Layout from '@/layouts/Layout.astro';
import Marquee from '@/components/Marquee.astro';

// App URL for links - defaults to localhost:3000 in development
const appUrl = import.meta.env.PUBLIC_APP_URL || 'http://localhost:3000';
---

<Layout
  title="tally. — Sistema de pagos para restaurantes"
  description="Cobra más rápido, rota más mesas, gana más. Pagos con QR, división automática, tarifa plana. 12 minutos menos por mesa."
>
  <!-- ═══════════════════════════════════════════
       HERO - Solo "tally." Nada más.
       ═══════════════════════════════════════════ -->
  <section class="section relative overflow-hidden">
    <div class="container">
      <div class="flex flex-col items-center justify-center min-h-[85vh] text-center">
        <!-- El nombre, gigante y centrado -->
        <h1
          class="font-serif text-display relative"
          data-split-text
        >
          tally<span class="text-tomato">.</span>
        </h1>

        <!-- Subtítulo alineado con la 't' pero sin chocar con la 'y' -->
        <p
          class="text-body-lg text-muted mt-8"
          style="margin-right: 180px;"
          data-animate="fade-up"
          data-delay="0.2"
        >
          Pagos al instante. Más <span id="rotating-word" class="text-foreground">rotación</span>.
        </p>
      </div>
    </div>

    <!-- Elementos parallax decorativos + mouse parallax -->
    <div
      class="absolute -right-32 top-1/4 w-96 h-96 rounded-full bg-tomato opacity-[0.08]"
      data-speed="0.4"
      data-mouse-parallax="0.03"
    >
    </div>
    <div
      class="absolute -left-40 bottom-1/4 w-64 h-64 rounded-full bg-basil opacity-[0.06]"
      data-speed="0.6"
      data-mouse-parallax="0.05"
    >
    </div>
  </section>

  <!-- ═══════════════════════════════════════════
       STATEMENT - Declaración audaz
       ═══════════════════════════════════════════ -->
  <section class="section-half bg-warm-black relative overflow-hidden">
    <div class="container relative z-10">
      <p
        class="font-serif text-headline max-w-4xl"
        data-animate="fade-up"
      >
        Cobrar lento <br />
        cuesta caro<span class="text-tomato">.</span>
      </p>
    </div>
    <!-- Círculos decorativos con parallax -->
    <div
      class="absolute -left-20 top-1/2 w-40 h-40 rounded-full border-2 border-cream/10"
      data-speed="0.5"
      data-rotate
    ></div>
    <div
      class="absolute right-10 bottom-10 w-24 h-24 rounded-full bg-tomato/20"
      data-speed="0.3"
    ></div>
  </section>

  <!-- ═══════════════════════════════════════════
       MARQUEE - Palabras clave
       ═══════════════════════════════════════════ -->
  <Marquee />

  <!-- ═══════════════════════════════════════════
       CÓMO FUNCIONA - 3 pasos, mucho espacio
       ═══════════════════════════════════════════ -->
  <section class="section relative overflow-hidden">
    <div class="container relative z-10">
      <p
        class="text-caption text-muted mb-16"
        data-animate="fade"
      >
        Para tu restaurante
      </p>

      <div class="space-y-32 lg:space-y-48">
        <!-- Paso 1 -->
        <div
          class="grid lg:grid-cols-2 gap-8 lg:gap-16 items-center relative"
        >
          <div data-animate="fade-up">
            <span class="font-serif text-hero text-stone-200" data-animate="scale" data-delay="0.2">01</span>
            <h2 class="font-serif text-headline mt-4">QR en cada mesa</h2>
            <p class="text-body-lg text-muted mt-6 max-w-md">
              Tus clientes escanean y pagan desde el móvil. Sin esperas.
            </p>
          </div>
          <div class="bg-stone-100 aspect-[4/3] rounded-sm relative group" data-speed="0.1" data-reveal data-mouse-parallax="0.02">
            <!-- Placeholder para mockup -->
            <div class="w-full h-full flex items-center justify-center transition-transform group-hover:scale-105 duration-500">
              <div class="w-32 h-32 border-4 border-stone-300 rounded-lg flex items-center justify-center">
                <span class="font-mono text-stone-400 text-sm">QR</span>
              </div>
            </div>
          </div>
          <!-- Elemento decorativo -->
          <div class="absolute -right-12 top-0 w-32 h-32 bg-carrot/5 rounded-full" data-speed="0.3"></div>
        </div>

        <!-- Paso 2 -->
        <div
          class="grid lg:grid-cols-2 gap-8 lg:gap-16 items-center relative"
        >
          <div class="lg:order-2" data-animate="fade-up">
            <span class="font-serif text-hero text-stone-200" data-animate="scale" data-delay="0.2">02</span>
            <h2 class="font-serif text-headline mt-4">División automática</h2>
            <p class="text-body-lg text-muted mt-6 max-w-md">
              Ven en tiempo real quién pagó qué. Menos errores en cuenta.
            </p>
          </div>
          <div
            class="bg-basil aspect-[4/3] rounded-sm lg:order-1 relative group"
            data-speed="0.15"
            data-reveal
            data-mouse-parallax="0.02"
          >
            <!-- Placeholder -->
            <div class="w-full h-full flex items-center justify-center transition-transform group-hover:scale-105 duration-500">
              <div class="text-center text-cream/60">
                <p class="font-serif text-4xl" data-counter="47" data-suffix=".50">€47.50</p>
                <p class="text-sm mt-2">Tu parte</p>
              </div>
            </div>
          </div>
          <!-- Elemento decorativo -->
          <div class="absolute -left-16 bottom-20 w-24 h-24 border-2 border-basil/20 rounded-full" data-speed="0.4" data-rotate></div>
        </div>

        <!-- Paso 3 -->
        <div
          class="grid lg:grid-cols-2 gap-8 lg:gap-16 items-center relative"
        >
          <div data-animate="fade-up">
            <span class="font-serif text-hero text-stone-200" data-animate="scale" data-delay="0.2">03</span>
            <h2 class="font-serif text-headline mt-4">Pagos al instante</h2>
            <p class="text-body-lg text-muted mt-6 max-w-md">
              El dinero llega a tu cuenta al momento. Tarifa plana mensual.
            </p>
          </div>
          <div class="bg-tomato aspect-[4/3] rounded-sm relative group" data-speed="0.1" data-reveal data-mouse-parallax="0.02">
            <!-- Placeholder -->
            <div class="w-full h-full flex items-center justify-center transition-transform group-hover:scale-105 duration-500">
              <div class="text-center text-cream">
                <p class="font-serif text-4xl">✓</p>
                <p class="text-sm mt-2">Pagado</p>
              </div>
            </div>
          </div>
          <!-- Elemento decorativo -->
          <div class="absolute -right-8 bottom-10 w-40 h-40 bg-yolk/5 rounded-full" data-speed="0.25"></div>
        </div>
      </div>
    </div>

    <!-- Elementos parallax de fondo -->
    <div class="absolute top-1/4 left-1/4 w-2 h-2 bg-tomato rounded-full" data-speed="0.7"></div>
    <div class="absolute top-1/2 right-1/3 w-3 h-3 bg-basil/50 rounded-full" data-speed="0.6"></div>
    <div class="absolute bottom-1/3 left-1/2 w-1.5 h-1.5 bg-carrot rounded-full" data-speed="0.8"></div>
  </section>

  <!-- ═══════════════════════════════════════════
       BLOQUE COLOR - Statement
       ═══════════════════════════════════════════ -->
  <section class="section bg-basil relative overflow-hidden">
    <div class="container relative z-10">
      <p
        class="font-serif text-headline max-w-3xl"
        data-animate="fade-up"
      >
        Menos tiempo cobrando.
        <span class="opacity-60">Más tiempo sirviendo.</span>
      </p>
    </div>
    <!-- Elementos decorativos -->
    <div class="absolute top-20 right-20 w-64 h-64 bg-cream/5 rounded-full" data-speed="0.4"></div>
    <div class="absolute bottom-10 left-10 w-32 h-32 border-2 border-cream/10 rounded-full" data-speed="0.5" data-rotate></div>
    <div class="absolute top-1/2 left-1/3 w-4 h-4 bg-cream/20 rounded-full" data-speed="0.7"></div>
  </section>

  <!-- ═══════════════════════════════════════════
       PARA RESTAURANTES
       ═══════════════════════════════════════════ -->
  <section class="section relative overflow-hidden">
    <div class="container relative z-10">
      <div class="grid lg:grid-cols-12 gap-8 lg:gap-16">
        <div class="lg:col-span-4" data-animate="fade-up">
          <p class="text-caption text-muted mb-4">Para restaurantes</p>
          <h2 class="font-serif text-headline">
            Menos fricción.
            <br />
            Más rotación.
          </h2>
        </div>

        <div class="lg:col-span-8 lg:col-start-6">
          <div class="space-y-12" data-stagger>
            <div class="border-t border-stone-300 pt-8 group hover:border-tomato transition-colors duration-300">
              <h3 class="text-title group-hover:text-tomato transition-colors">POS integrado</h3>
              <p class="text-body text-muted mt-3">
                Sistema de punto de venta completo. Gestiona pedidos, mesas y
                productos desde cualquier dispositivo.
              </p>
            </div>

            <div class="border-t border-stone-300 pt-8 group hover:border-basil transition-colors duration-300">
              <h3 class="text-title group-hover:text-basil transition-colors">Tiempo real</h3>
              <p class="text-body text-muted mt-3">
                Ve quién ha pagado, cuánto falta, qué mesas necesitan atención.
                Todo sincronizado.
              </p>
            </div>

            <div class="border-t border-stone-300 pt-8 group hover:border-carrot transition-colors duration-300">
              <h3 class="text-title group-hover:text-carrot transition-colors">Sin comisiones por transacción</h3>
              <p class="text-body text-muted mt-3">
                Tarifa plana mensual. Predecible. Sin sorpresas.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Elementos decorativos -->
    <div class="absolute -right-20 top-1/3 w-48 h-48 bg-tomato/5 rounded-full" data-speed="0.3"></div>
    <div class="absolute left-0 bottom-20 w-20 h-20 border-2 border-stone-300 rounded-full" data-speed="0.6" data-rotate></div>
  </section>

  <!-- ═══════════════════════════════════════════
       COLORES - Showcase de themes
       ═══════════════════════════════════════════ -->
  <section class="py-8">
    <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-0">
      <div class="bg-tomato aspect-square flex items-center justify-center hover:scale-105 transition-transform duration-300">
        <span class="font-serif text-title text-cream/90">Tomate</span>
      </div>
      <div class="bg-carrot aspect-square flex items-center justify-center hover:scale-105 transition-transform duration-300">
        <span class="font-serif text-title text-warm-black/90">Zanahoria</span>
      </div>
      <div class="bg-yolk aspect-square flex items-center justify-center hover:scale-105 transition-transform duration-300">
        <span class="font-serif text-title text-warm-black/90">Yema</span>
      </div>
      <div class="bg-basil aspect-square flex items-center justify-center hover:scale-105 transition-transform duration-300">
        <span class="font-serif text-title text-cream/90">Albahaca</span>
      </div>
      <div class="bg-kale aspect-square flex items-center justify-center hover:scale-105 transition-transform duration-300">
        <span class="font-serif text-title text-cream/90">Kale</span>
      </div>
      <div class="bg-blueberry aspect-square flex items-center justify-center hover:scale-105 transition-transform duration-300">
        <span class="font-serif text-title text-cream/90">Arándano</span>
      </div>
      <div class="bg-beet aspect-square flex items-center justify-center hover:scale-105 transition-transform duration-300">
        <span class="font-serif text-title text-cream/90">Remolacha</span>
      </div>
    </div>
    <p class="text-center text-caption text-muted py-8" data-animate="fade">
      Personaliza con los colores de tu marca
    </p>
  </section>

  <!-- ═══════════════════════════════════════════
       CTA FINAL
       ═══════════════════════════════════════════ -->
  <section class="section bg-warm-black relative overflow-hidden">
    <div class="container text-center relative z-10">
      <h2
        class="font-serif text-hero mb-12"
        data-animate="scale"
      >
        Empieza hoy<span class="text-tomato">.</span>
      </h2>
      <p
        class="text-body-lg text-stone-400 mb-12"
        data-animate="fade-up"
        data-delay="0.1"
      >
        Prueba 14 días gratis. Sin permanencia.
      </p>
      <div data-animate="fade-up" data-delay="0.2">
        <a
          href={`${appUrl}/register`}
          class="btn btn-solid !bg-cream !text-warm-black !border-cream hover:!bg-transparent hover:!text-cream inline-flex items-center gap-2 group"
          data-magnetic
        >
          Empezar ahora
          <span class="transition-transform group-hover:translate-x-1">→</span>
        </a>
      </div>
    </div>
    <!-- Elementos decorativos -->
    <div class="absolute top-20 left-20 w-96 h-96 bg-tomato/10 rounded-full blur-3xl" data-speed="0.2"></div>
    <div class="absolute bottom-20 right-20 w-64 h-64 bg-basil/10 rounded-full blur-3xl" data-speed="0.35"></div>
    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-2 h-2 bg-cream/30 rounded-full" data-speed="0.8"></div>
  </section>

  <!-- ═══════════════════════════════════════════
       FOOTER - Mínimo
       ═══════════════════════════════════════════ -->
  <footer class="py-16 border-t border-stone-300">
    <div class="container">
      <div class="flex flex-col md:flex-row justify-between items-start gap-12">
        <div>
          <a href="/" class="font-serif text-title">
            tally<span class="text-tomato">.</span>
          </a>
          <p class="text-body text-muted mt-4 max-w-xs">
            Sistema de pagos para restaurantes modernos.
          </p>
        </div>

        <div class="flex gap-16">
          <div>
            <p class="text-caption text-muted mb-4">Producto</p>
            <ul class="space-y-3">
              <li><a href={`${appUrl}/register`} class="link text-body">Empezar gratis</a></li>
              <li><a href="#" class="link text-body">Precios</a></li>
              <li><a href="#" class="link text-body">Demo</a></li>
            </ul>
          </div>
          <div>
            <p class="text-caption text-muted mb-4">Recursos</p>
            <ul class="space-y-3">
              <li><a href="#" class="link text-body">Soporte</a></li>
              <li><a href="#" class="link text-body">Privacidad</a></li>
              <li><a href="#" class="link text-body">Términos</a></li>
            </ul>
          </div>
        </div>
      </div>

      <div class="divider my-12"></div>

      <div class="flex flex-col md:flex-row justify-between items-center gap-4">
        <p class="text-caption text-muted">
          © 2025 Tally. Hecho en España.
        </p>
        <a
          href="mailto:hola@paytally.app"
          class="link text-body"
        >
          hola@paytally.app
        </a>
      </div>
    </div>
  </footer>
</Layout>
